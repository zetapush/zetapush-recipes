/**
 * Check if the login is available for a creation
 */
macroscript core_user__isLoginAvailableByService(
	/** user login */ @NotNull string login,
	/** Group service implementation */ @NotNull service<simple> zpAuthenticationService
) {
	/** Check user existence */
	const user = zpAuthenticationService.checkUser({
		key: login,
		softFail: true
	});
	const available = !(user.login ??);
} broadcast new LoginAvailability(available, login, user) on channel __selfName
