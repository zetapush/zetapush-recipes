/**
 * TODO: Need to add function to set permissions
 */
macroscript getUserRoomList(
	/** Optional userkey */ string userKey, 
	/** Pagination object */ zpRecipeUtils::Pagination page
) {
	
	/** Manage default parameters */
	userKey = userKey ?: __userKey;
	
	const { list } = sudo userKey await core_room__getUserRoomListByService({ 
		page, zpService: zpServiceGroups
	});
} broadcast {
	map[] list
} on channel __selfName
